define(["jquery"],function(t){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var o,i;o=[n(1),n(2),n(3),n(4),n(5),n(6)],i=function(t,e,n,o,i){"use strict";function r(t){this.isFodium=t,this.baseInfo={baseResourcesUrl:""},this.hasBaseInfo=!1,this.widgetQueue=new e,this.initialize()}var s=null;return r.prototype={constructor:r,initialize:function(){this.hasBaseInfo===!1&&(this.isFodium?this.hasBaseInfo=!0:this.getBaseInfoFromAjax())},setBaseInfo:function(t){this.baseInfo=t,this.hasBaseInfo=!0},getBaseInfo:function(){return this.baseInfo},getBaseInfoFromAjax:function(){var e,n=this,i=o.getFodiumWebUrl();i&&(e=i+"/widgetLoader/baseInfo"),e&&t.ajax({url:e,type:"GET",dataType:"jsonp",cache:!1}).done(function(t){n.setBaseInfo(t),n.widgetQueue.execute()}).fail(function(){})},postABTestLog:function(t){t.useABTestLog()&&i.postLog(t.getABTestKey())},getWidgetPath:function(t,e){var n=t.getPath();t.isABTestPath()?i.getOption(t.getABTestKey(),function(t){e(n[t])}):e(n)},generateWidgetPath:function(t){var e=this.getBaseInfo().baseResourcesUrl;return e?e+t+".js":t},generateExecuteFunction:function(t,e){var o=this;return function(){var i,r=new n(t),s=e&&"function"==typeof e,u=function(n){n?(i=o.generateWidgetPath(n),s&&i?(o.postABTestLog(r),e([i],function(e){e?r.isLoaded()||(o.successWidgetLoad(t,r),new e(t,r.getParams())):o.failWidgetLoad(t,r)})):o.failWidgetLoad(t,r)):o.failWidgetLoad(t,r)};o.getWidgetPath(r,function(t){u(t)})}},successWidgetLoad:function(t,e){t.show(),e.setLoaded(!0)},failWidgetLoad:function(t,e){t.hide(),e.setLoaded(!1)},loadWidget:function(t,e){var n=this.generateExecuteFunction(t,e);this.hasBaseInfo?n():this.widgetQueue.put(n)}},{load:function(e,n){e&&e.length>0&&(s=s||new r(o.isFodium()),e.each(function(e,o){s.loadWidget(t(o),n)}))}}}.apply(e,o),!(void 0!==i&&(t.exports=i))},function(e,n){e.exports=t},function(t,e,n){var o;o=function(){"use strict";function t(){this._widgetLoadQueue=[]}return t.prototype={constructor:t,put:function(t){this.isFunction(t)&&this._widgetLoadQueue.push(t)},get:function(){return this._widgetLoadQueue.shift()},execute:function(){for(var t;t=this.get();)t&&"function"==typeof t&&t()},isFunction:function(t){return t&&"function"==typeof t}},t}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))},function(t,e,n){var o,i;o=[n(1)],i=function(){"use strict";function t(t){this._$element=t}var e="fodium-widget",n={PATH:e,PARAMS:e+"-params",AB_TEST_KEY:e+"-abtestkey",AB_TEST_LOG:e+"-abtestlog",LOADED:e+"-loaded",POSTED_AB_TEST_LOG:e+"-posted-abtestlog"};return t.prototype={constructor:t,getElement:function(){return this._$element},getPath:function(){return this.getElement().data(n.PATH)},getParams:function(){return this.getElement().data(n.PARAMS)},getABTestKey:function(){return this.getElement().data(n.AB_TEST_KEY)},useABTestLog:function(){return this.getElement().data(n.AB_TEST_LOG)},isABTestPath:function(){var t=this.getPath(),e=this.getABTestKey();return t&&"object"==typeof t&&e},isLoaded:function(){return this.getElement().prop(n.LOADED)},setLoaded:function(t){this.getElement().prop(n.LOADED,t)}},t}.apply(e,o),!(void 0!==i&&(t.exports=i))},function(t,e,n){var o,i;o=[n(1)],i=function(t){"use strict";var e={FODIUM_WEB_URL:"fodium-web-url"},n=".fodium-wrapper",o="fodium-reference",i=t(n),r=i.data(o)||{};return{mode:function(){return r.mode},isFodium:function(){return r.isFodium},isApp:function(){return r.isApp},getFodiumWebUrl:function(){return t("[data-"+e.FODIUM_WEB_URL+"]").data(e.FODIUM_WEB_URL)}}}.apply(e,o),!(void 0!==i&&(t.exports=i))},function(t,e,n){var o,i;o=[n(1),n(4)],i=function(t,e){"use strict";var n;return n=e.isFodium()?"/":e.getFodiumWebUrl()+"/",{_cache:{},getOption:function(e,o,i){var r={abTestKey:e};r.abTestKey&&t.ajax({url:n+"abtest/getOption?"+t.param(r),type:"GET",dataType:"jsonp",cache:!1}).done(function(t){var n="A";o&&"function"==typeof o&&(t&&t[e]&&(n=t[e]),o(n))}).fail(function(t,e,n){i&&"function"==typeof i&&i(n)})},postLog:function(e,o,i){e&&!this.isPosted(e)&&(this.setPosted(e,!0),t.ajax({url:n+"abtest/logging/"+e,type:"GET",dataType:"jsonp"}).done(function(t){o&&"function"==typeof o&&o(t)}).fail(function(t,e,n){i&&"function"==typeof i&&i(n)}))},isPosted:function(t){return!!this._cache[t]},setPosted:function(t,e){this._cache[t]=e}}}.apply(e,o),!(void 0!==i&&(t.exports=i))},function(t,e,n){var o;o=function(){"use strict";Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,o=function(){},i=function(){return n.apply(this instanceof o?this:t,e.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(o.prototype=this.prototype),i.prototype=new o,i}),Array.prototype.filter||(Array.prototype.filter=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var o=[],i=arguments.length>=2?arguments[1]:void 0,r=0;r<n;r++)if(r in e){var s=e[r];t.call(i,s,r,e)&&o.push(s)}return o})}.call(e,n,e,t),!(void 0!==o&&(t.exports=o))}])});