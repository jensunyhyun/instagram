define(["jquery","../../../../lib/jquery/plugin/jquery.selectbox-0.2"],function($){var SearchCategories=function(){this.$init.apply(this,arguments)};SearchCategories.prototype={constructor:SearchCategories,$init:function(htOption){this._welCategory=$(htOption.category);this._welPopupLayer=$(htOption.popupLayer);this._welCurrentCategory=$("#currentCategoryText");this._welSelectedCategory=$("#searchSelectedCategory");this.setCurrentCategory();this.setSelectedCategory();this._attachEvent()},getCategoryLinkCode:function(){var $options=
this._welCategory.children("option"),selected="";$.each($options,function(){var $this=$(this);if($this.val()>0&&$this.is(":selected")){selected=$this.val();return false}});return selected},getComponentId:function(sLinkCode,fCallback){$.ajax({url:"//www.coupang.com/np/search/components",cache:false,data:{"linkCode":sLinkCode},dataType:"jsonp",success:function(oData){if(fCallback)fCallback(sLinkCode,oData["component"])},error:function(oRequest){console.log(oRequest);fCallback(oRequest.responseText["component"])}})},
setComponentValue:function(sLinkCode,nComponent){this._welSelectedCategory.val(nComponent)},setCurrentCategory:function(){var sCurrentLinkCode=this._welCurrentCategory.length>0?this._welCurrentCategory.data("linkcode").replace("/np/categories/",""):"";var aOption=this._welCategory.find("option");for(var i=0;i<aOption.length;i++){var sValue=$(aOption[i]).val();$(aOption[i]).val(sValue.replace("/np/categories/",""))}this._welCategory.val(sCurrentLinkCode)},setSelectedCategory:function(){var $options=
this._welCategory.children("option"),$selectedCategory=$("#searchSelectedCategory"),selectedCategoryId=$selectedCategory.val();selectedCategoryId&&$.each($options,function(){var $this=$(this),categoryId=$this.data("category-id")||"";if(selectedCategoryId==categoryId){$this.attr("selected",true);return false}})},_attachEvent:function(){this._welCategory.selectbox({classHolder:"select--category",classHolderDisabled:"select--category__disabled",classSelector:"select--category__current",classToggleOpen:"select--category__opened",
classToggle:"select--category--button",classOptions:"select--category--option",classDisabled:"select--category--option__disabled",classGroup:"select--category--option__group",classSub:"select--category--option__sub",classFocus:"select--category--option__focused",onOpen:function(){$(".select--category").addClass("is-opend")},onClose:function(){$(".select--category").removeClass("is-opend")}})}};return SearchCategories});