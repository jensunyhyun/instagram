define(["jquery"],function($){var rocketBadge=function(target){this.init(target)};rocketBadge.prototype={init:function(target){this.target=target;this.vendorItemIds="";this.items="";this.getVendorItemIds()},getVendorItemIds:function(){this.items=this.target.find("ul.prod-list \x3e li:visible");var index=0,item=this.items;while(index<item.length){var deliveryType=$(item[index]).data("delivery-type")||"";if($(item[index]).data("vendor-item-id")&&deliveryType!=="ROCKET_INSTALL")this.vendorItemIds+=index===
item.length-1?$(item[index]).data("vendor-item-id"):[$(item[index]).data("vendor-item-id"),","].join("");index++}if(this.vendorItemIds!=="")if(!this.items.first().hasClass("rocket-checked"));},getRocketBadge:function(){$.ajax({url:"/np/delivery/vendor-item-properties",method:"GET",dataType:"json",data:{vendorItemIds:this.vendorItemIds,properties:"ROCKET_BADGE"},success:$.proxy(function(data){var itemChecked=this.items.first();itemChecked.addClass("rocket-checked");if(data)this.drawRocketBadge(data)},
this),error:function(e){if(e.statusText==="timeout"||e.status===404)procMng.hideIndicator()}})},drawRocketBadge:function(data){var targetElem=$(".badge-rocket-componentization img");for(var key in data){var element=this.target.find('li[data-vendor-item-id\x3d"'+key+'"]');if(data[key].ROCKET_BADGE.iconUrl)element.find(targetElem).attr("src",data[key].ROCKET_BADGE.iconUrl)}}};return rocketBadge});