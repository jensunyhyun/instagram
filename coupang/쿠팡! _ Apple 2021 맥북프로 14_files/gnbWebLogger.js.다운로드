define(["jquery","weblog","common/essentialData"],function($,CoupangWebLog,essentialData){var DEFAULT_TARGET_WRAPPER=".renewal-header, #coupang-banner",DEFAULT_TARGET_SELECTOR="data-log-props",DEFAULT_DOMAIN="gnb",DEFAULT_PAGE_NAME="gnb",DEFAULT_DATA={domain:DEFAULT_DOMAIN,pageName:DEFAULT_PAGE_NAME},LOG_CATEGORIES={page:"view",impression:"impression",click:"event"};var BASE_SCHEMA={dropdown_menu:{meta:{schemaId:1173,schemaVersion:1},data:{domain:DEFAULT_DATA["domain"],pageName:DEFAULT_DATA["pageName"],
eventName:"click_gnb_dropdown_menu",eventGroup:"",targetLabel:""}},home_section_navigation:{meta:{schemaId:28,schemaVersion:2},data:{domain:"home",pageName:"home",eventName:"click_home_section_navigation_view",sectionId:""}}};var seller_page_baseParam=$.extend({},BASE_SCHEMA["dropdown_menu"]),customer_center_baseParam=$.extend({},BASE_SCHEMA["dropdown_menu"]),mycoupang_baseParam=$.extend({},BASE_SCHEMA["dropdown_menu"]),cart_baseParam=$.extend({},BASE_SCHEMA["dropdown_menu"]);seller_page_baseParam["data"]=
$.extend({},seller_page_baseParam["data"],{eventGroup:"seller_page"});customer_center_baseParam["data"]=$.extend({},customer_center_baseParam["data"],{eventGroup:"customer_center"});mycoupang_baseParam["data"]=$.extend({},mycoupang_baseParam["data"],{eventGroup:"mycoupang"});cart_baseParam["data"]=$.extend({},cart_baseParam["data"],{eventGroup:"cart"});var LOG_PARAMS={top_banner:{meta:{schemaId:1170,schemaVersion:1}},top_banner_close:{meta:{schemaId:1171,schemaVersion:1}},add_to_favorites:{meta:{schemaId:1172,
schemaVersion:1}},login:{meta:{schemaId:1174,schemaVersion:1}},member_register:{meta:{schemaId:1175,schemaVersion:1}},logout:{meta:{schemaId:1177,schemaVersion:1}},coupang_logo:{meta:{schemaId:1194,schemaVersion:1}},category_menu_banner:{meta:{schemaId:1181,schemaVersion:1}},category_menu:{meta:{schemaId:1182,schemaVersion:1}},gnb_menu_item:$.extend({},BASE_SCHEMA["home_section_navigation"]),seller_page:$.extend({},seller_page_baseParam),travel_seller_page:$.extend({},seller_page_baseParam),rocket_seller_page:$.extend({},
seller_page_baseParam),customer_center:$.extend({},customer_center_baseParam),customer_center_1:$.extend({},customer_center_baseParam),customer_center_2:$.extend({},customer_center_baseParam),customer_center_3:$.extend({},customer_center_baseParam),customer_center_4:$.extend({},customer_center_baseParam),customer_center_5:$.extend({},customer_center_baseParam),mycoupang:$.extend({},mycoupang_baseParam),mycoupang_1:$.extend({},mycoupang_baseParam),mycoupang_2:$.extend({},mycoupang_baseParam),mycoupang_3:$.extend({},
mycoupang_baseParam),mycoupang_4:$.extend({},mycoupang_baseParam),mycoupang_5:$.extend({},mycoupang_baseParam),cart:$.extend({},cart_baseParam),cart_all:$.extend({},cart_baseParam),cart_item_0:$.extend({},cart_baseParam),cart_item_1:$.extend({},cart_baseParam),cart_item_2:$.extend({},cart_baseParam),cart_item_3:$.extend({},cart_baseParam),cash_label:{meta:{schemaId:2450,schemaVersion:1}},benefit_widget:{meta:{schemaId:2452,schemaVersion:1}},cash_label_impression:{meta:{schemaId:2451,schemaVersion:1}},
benefit_widget_impression:{meta:{schemaId:2453,schemaVersion:1}}};var GnbWebLogger={init:function(){if(arguments.length>0){if(arguments.hasOwnProperty("wrapper")===true)DEFAULT_TARGET_WRAPPER=arguments["wrapper"];if(arguments.hasOwnProperty("selector")===true)DEFAULT_TARGET_SELECTOR=arguments["selector"]}var targetElements=$(DEFAULT_TARGET_WRAPPER).find("["+DEFAULT_TARGET_SELECTOR+"]");this.initWebLog();this.attachClickLog(targetElements)},initWebLog:function(){if(!window.CoupangWebLog)CoupangWebLog.init({"platform":"web",
"service":"coupang","mode":essentialData.getProfile()===""||essentialData.getProfile()==="production"?"production":"test","useAutoSendPageViewLog":false})},setLogEventName:function(logType,logDomain,logId){var eventName=logId.replace("_"+logType,"");return{eventName:logType+"_"+DEFAULT_DOMAIN+"_"+eventName}},makeLogParam:function(eventType,props){var logProps=$.parseJSON(props);if(logProps.hasOwnProperty("id")===false)return false;var logId=logProps["id"],param={meta:{},data:{},extra:{}},logCategory=
{logCategory:LOG_CATEGORIES[eventType]},logType={logType:eventType},eventName=this.setLogEventName(eventType,DEFAULT_DOMAIN,logId);param["data"]=$.extend({},param["data"],DEFAULT_DATA,logCategory,logType,eventName);if(LOG_PARAMS.hasOwnProperty(logId)===true){param["data"]=$.extend({},param["data"],LOG_PARAMS[logId].data);param["meta"]=$.extend({},param["meta"],LOG_PARAMS[logId].meta);if(LOG_PARAMS[logId].hasOwnProperty("data")&&LOG_PARAMS[logId].data.hasOwnProperty("eventName"))param["data"]["eventName"]=
LOG_PARAMS[logId]["data"]["eventName"]}if(logProps.hasOwnProperty("param")===true)param["data"]=$.extend({},param["data"],logProps["param"]);if(param.meta["schemaId"]===1173)param["data"]=$.extend({},param["data"],{targetLabel:logId});return param},clickLog:function(e){var props=$(e.currentTarget).attr(DEFAULT_TARGET_SELECTOR),logParam=this.makeLogParam("click",props);this.submitLog(logParam);e.stopPropagation()},submitLog:function(param){if(essentialData.getAbTestOptionByKey("4250")!=="B")return false;
if(typeof CoupangWebLog==="undefined")return false;if(param["meta"].hasOwnProperty("schemaId")===false)return false;if(param["meta"].hasOwnProperty("schemaVersion")===false)return false;if(window.CoupangWebLog)window.CoupangWebLog.submit(param);else CoupangWebLog.submit(param)},attachClickLog:function(elements){var element=null,i=0,cnt=elements.length;for(i=0;i<cnt;i++){element=$(elements[i]);element.on("click",$.proxy(this.clickLog,this))}},impressionCustomLog:function(logParam){var param=this.makeLogParam("impression",
logParam);this.submitLog(param)},clickCustomLog:function(logParam){var param=this.makeLogParam("click",logParam);this.submitLog(param)}};return GnbWebLogger});