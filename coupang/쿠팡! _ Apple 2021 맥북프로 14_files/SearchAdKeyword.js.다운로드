define(["jquery","common/template/urlBuilder","common/utils/validationUtils","common/reporter/gaToWiseLogMaker","common/reporter/queryStringAppender"],function($,urlBuilder,validationUtils,gaToWiseLogMaker,queryStringAppender){var KeywordAdSearch=function(targetInfo){this.$searchForm=$(targetInfo.searchForm);this.$inputTarget=$(targetInfo.inputTarget);this.$subminBtn=$(targetInfo.submitBtn);var searchAd=this.$inputTarget.data("searchad");if(validationUtils.isNotEmpty(searchAd)){this.searchAdKeyword=
searchAd.copy;this.channel=searchAd.channel;this.linkContent=searchAd.linkContent;this.linkType=searchAd.linkType;this.newWindow=searchAd.newWindow}else{this.searchAdKeyword=null;this.channel=null;this.linkContent=null;this.linkType=null;this.newWindow=null}this.init()};KeywordAdSearch.prototype={init:function(){this.bindKeywordAdSearch()},bindKeywordAdSearch:function(){if(validationUtils.isEmpty(this.$inputTarget.val())&&!this.$inputTarget.is(":focus"))this.$inputTarget.addClass("ad-keyword")},getSearchAdKeyword:function(){return this.searchAdKeyword},
isSearchAdKeyword:function(){var inputKeyword=this.$inputTarget.val();if(validationUtils.isNotEmpty(this.searchAdKeyword)&&inputKeyword===this.searchAdKeyword)return true;return false},isExecutableSearchAdKeywordEvent:function(){return this.isSearchAdKeyword()},executeSearchAdKeywordEvent:function(){var linkContent="";if(validationUtils.isEmpty(this.linkType))return null;else if(this.linkType==="URL")linkContent=this.linkContent;else{var query=encodeURIComponent(this.linkContent);linkContent=queryStringAppender.getUrlWithQueryStringDelimiter(this.$searchForm.data("actionurl"),
"q\x3d"+query)}var tracking="channel\x3d"+this.channel+"\x26"+gaToWiseLogMaker.buildGAParameter(this.$subminBtn);linkContent=queryStringAppender.getUrlWithQueryStringDelimiter(linkContent,tracking);if(this.newWindow==="1")window.open(linkContent,"_blank");else window.location.href=linkContent}};return KeywordAdSearch});